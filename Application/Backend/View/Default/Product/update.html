<extend name="Layouts/layout" />

<block name="links">
<link rel="stylesheet" href="__BACKEND_ACEADMIN__css/jquery-ui.custom.min.css">
</block>

<block name="content">

		<div class="page-header">
			<h1>
				<i class="fa fa-home"></i> 首页
				<small>
					<i class="ace-icon fa fa-angle-double-right"></i>
					产品管理
					<i class="ace-icon fa fa-angle-double-right"></i>
					<a  href="<?php echo U('Backend/Product/index', [], false);?>">产品列表</a>
					&amp; 修改产品信息
				</small>
				<a class="btn btn-info btn-sm btn-white pull-right" href="<?php echo U('Backend/Product/index', [], false);?>">产品列表</a>
			</h1>
		</div><!-- end/.page-header -->



	<div class="row">
		<div class="col-xs-12">



	<form class="form-horizontal" action="<?php echo U('Backend/Product/store', [ 'id' => $entity['id'] ], false);?>" role="form" method="post" name="update" id="update">
		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="product_name"> 产品名称 </label>

			<div class="col-sm-9">

				<input type="text" name="product_name"  id="product_name"   value="<?php echo $entity['product_name'];?>" class="col-xs-10 col-sm-5">
			</div>
		</div>

		<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="product_type_id"> 产品类型 </label>

			<div class="col-sm-9">
				<select class="col-xs-10 col-sm-5" name="product_type_id" id="product_type_id">
					<?php foreach($extra['product_type_id'] as $k => $v):?>
						<option value="<?php echo $k;?>"
							<?php echo $entity['product_type_id'] == $k ? 'selected="selected"':  '';?>
							>
							<?php echo $v;?>
						</option>
					<?php endforeach;?>
				</select>
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle"></span>
				</span>
			</div>
		</div>

		<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="up_level"> 升级配置级别 </label>

			<div class="col-sm-9">
				<div class="col-xs-10 col-sm-5">
						<!-- <span class="slider col-xs-10 col-sm-5 ui-slider-green ui-slider-small" id="slider"></span> -->
						<input type="text" readonly="readonly" id="up_level" name="up_level" value="<?php echo $entity['up_level'];?>">
				</div>

				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle">数字越大代表配置越高</span>
				</span>
			</div>
		</div>

				<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="system_type">
				<span style="color:red;" class="fa fa-asterisk"></span>
				操作系统
			 </label>

			<div class="col-sm-9">
				<div class="col-xs-10 col-sm-5 control-group">
					<div class="radio inline">
						<label>
							<input value="0" name="system_type" type="radio" class="ace" <?php echo $entity['system_type'] == 0? 'checked="checked"': '';?> />
							<span class="lbl"> windows</span>
						</label>
					</div>
					<div class="radio inline">
						<label>
							<input value="1" name="system_type" type="radio" class="ace" <?php echo $entity['system_type'] == 1? 'checked="checked"': '';?>>
							<span class="lbl"> linux</span>
						</label>
					</div>
				</div>
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle"></span>
				</span>
			</div>
		</div>

				<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="api_name"> API接口pname </label>

			<div class="col-sm-9">
				<input type="text" readonly="readonly"  id="api_name"   value="<?php echo $entity['api_name'];?>" class="col-xs-10 col-sm-5">
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle"></span>
				</span>
			</div>
		</div>

		<div class="space-4"></div>

<div class="form-group">
	<label class="col-sm-3 control-label no-padding-right" for="product_state">
		<span style="color:red;" class="fa fa-asterisk"></span>
		产品状态
	 </label>

	<div class="col-sm-9">
		<div class="col-xs-10 col-sm-5 control-group">
				<div class="radio inline">
					<label>
						<input value="1" name="product_state" type="radio" class="ace" <?php echo $entity['product_state'] == 1? 'checked="checked"': '';?> />
						<span class="lbl"> 上架</span>
					</label>
				</div>
				<div class="radio inline">
					<label>
						<input value="0" name="product_state" type="radio" class="ace" <?php echo $entity['product_state'] == 0? 'checked="checked"': '';?> />
						<span class="lbl"> 下架</span>
					</label>
				</div>
		</div>
		<span class="help-inline col-xs-12 col-sm-7">
			<span class="middle"></span>
		</span>
	</div>
</div>


		<div class="space-4"></div>

<div class="form-group">
	<label class="col-sm-3 control-label no-padding-right" for="type">
		<span style="color:red;" class="fa fa-asterisk"></span>
		产品类型
	 </label>

	<div class="col-sm-9">
		<div class="col-xs-10 col-sm-5 control-group">
				<div class="radio inline">
					<label>
						<input value="0" name="type" type="radio" class="ace" <?php echo $entity['type'] == 0? 'checked="checked"': '';?> />
						<span class="lbl"> 标准产品</span>
					</label>
				</div>
				<div class="radio inline">
					<label>
						<input value="1" name="type" type="radio" class="ace" <?php echo $entity['type'] == 1? 'checked="checked"': '';?> />
						<span class="lbl"> 增值产品</span>
					</label>
				</div>
		</div>
		<span class="help-inline col-xs-12 col-sm-7">
			<span class="middle"></span>
		</span>
	</div>
</div>



<div class="space-4"></div>

<div class="form-group">
	<label class="col-sm-3 control-label no-padding-right" for="area_code"> 所属地区 </label>

	<div class="col-sm-9">
		<select class="col-xs-10 col-sm-5" name="area_code" id="area_code">
			<?php foreach($extra['area_code'] as $k => $v):?>
				<option value="<?php echo $k;?>"
					<?php echo $entity['area_code'] == $k ? 'selected="selected"':  '';?>
					>
					<?php echo $v;?>
				</option>
			<?php endforeach;?>
		</select>
		<span class="help-inline col-xs-12 col-sm-7">
			<span class="middle"></span>
		</span>
	</div>
</div>

		<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right"  for="product_des">产品说明</label>
			<div class="col-sm-9">
				<textarea class="limited col-xs-10 col-sm-5" id="product_des" name="product_des" maxlength="100"><?php echo $entity['product_des'];?></textarea>
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle">最多100个字</span>
				</span>
			</div>
		</div>

		<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="modify_time"> 上次修改时间 </label>

			<div class="col-sm-9">
				<input type="text" readonly="readonly"  id="modify_time"   value="<?php echo $entity['modify_time'];?>" class="col-xs-10 col-sm-5">
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle"></span>
				</span>
			</div>
		</div>


			<div class="clearfix form-actions">
				<div class="col-md-offset-3 col-md-9">
					<button class="btn btn-info" type="submit" >
						<i class="ace-icon fa fa-check bigger-110"></i>
						修改
					</button>
					<a class="btn btn-info" href="<?php echo U('Backend/Product/index', [], false);?>">
						<span class="glyphicon glyphicon-repeat"></span>
						返回
					</a>
				</div>
			</div>

		</form>




		</div>
	</div>

</block>

<block name="scripts">
	<div id="limiterBox" class="limiterBox" style="position: absolute; display: none;"></div>
<!-- <script src="__COM_JS__jquery.validate.min.js"></script> -->
<script src="__COM_JS__jquery.validate_tuozhan.js"></script>
<script src="__COM_JS__messages_zh.js"></script>
<script src="__BACKEND_ACEADMIN__js/jquery.ui.touch-punch.min.js"></script>
<script src="__BACKEND_ACEADMIN__js/jquery.inputlimiter.1.3.1.min.js"></script>
<script type="text/javascript">


$('textarea.limited').inputlimiter({
	remText: '还可以在输入%n个字',
	limitText: '最多只允许输入 %n个字.'
});

$( "#slider" ).css({width:'90%', 'float':'left', margin:'15px'}).slider({
	value: $('#up_level').val(),
	min: 1,
	max: 100,
	range: "min",
	animate: true,
	slide: function( event, ui ) {
		var val = ui.value;
		if( !ui.handle.firstChild ) {
			$("<div class='tooltip right in' style='display:none;left:16px;top:-6px;'><div class='tooltip-arrow'></div><div class='tooltip-inner'></div></div>")
			.prependTo(ui.handle);
		}
		$(ui.handle.firstChild).show().children().eq(1).text(val);
	},
	change: function( event, ui ) {
		$('#up_level').val(ui.value);
	}
}).find('span.ui-slider-handle').on('blur', function(){
	$(this.firstChild).hide();
});



	function updater(form){
		form.submit();
	}
	$("#update").validate({
		submitHandler:function(form){
			updater(form);
        },
		onclick:false,
		onfocusout:false,
		onkeyup:false,
		errorPlacement: function (error, element){
			var $alert = $('<div class="alert alert-danger "><button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button><strong><i class="ace-icon fa fa-times"></i>错误： </strong> '+$(error).html()+' <br> </div>');

			$("#update").before($alert);

		},
		rules:{
			product_price:{
				required:true,
				number:true,
			  },
		  	month:{
				required:true,
				digits:true,
			},
			type:{
				required:true,
				number:true,
			}
		},
	  	messages:{
	  		product_price:{
				required:"产品价格必须填",
				number:"请输入数字作为价格",
		  	},
		  	month:{
			   required:"购买时间不能为空",
			   digits:"购买时间必须是整数"
			 },
			type:{
				required:"您忘记选择价格类型了",
				number:"价格类型参数非法"
			}
		}
	});

</script>

</block>

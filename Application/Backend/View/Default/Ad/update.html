<extend name="Layouts/layout" />

<block name="links">

</block>

<block name="content">

		<div class="page-header">
			<h1>
				<i class="fa fa-home"></i> 首页
				<small>
					<i class="ace-icon fa fa-angle-double-right"></i>
					广告图片管理
					<i class="ace-icon fa fa-angle-double-right"></i>
					<a href="<?php echo U('Backend/Ad/index', [  ], false);?>">广告图片列表</a>
					&amp; 修改广告图片
				</small>
				<a class="btn btn-info btn-sm btn-white pull-right" href="<?php echo U('Backend/Ad/index', [  ], false);?>">广告图片列表</a>
			</h1>
		</div><!-- end/.page-header -->



	<div class="row">
		<div class="col-xs-12">



	<form class="form-horizontal" action="<?php echo U('Backend/Ad/store', [ 'id' => $entity['id'] ], false);?>" role="form" method="post" name="update" id="update" enctype="multipart/form-data">
		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="id">
				广告图片编号
			</label>

			<div class="col-sm-9">

				<input type="text" readonly="readonly" disable="disable"  id="id"  value="<?php echo $entity['id'];?>" class="col-xs-10 col-sm-5">
			</div>
		</div>

		<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="type">
				广告图片位置
			</label>

			<div class="col-sm-9">
				<select class="col-xs-10 col-sm-5" name="location" id="location">
						<?php foreach($location as $k => $v):?>
							<option value="<?php echo $k;?>" <?php if($k == $entity['location']):?>selected="selected"<?php endif;?> >
								<?php echo $v;?>
							</option>
						<?php endforeach;?>
				</select>
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle"></span>
				</span>
			</div>
		</div>

				<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="state">
				是否展示
			 </label>

			<div class="col-sm-9">
				<select class="col-xs-10 col-sm-5" name="is_show" id="is_show">
						<?php foreach($is_show as $k => $v):?>
							<option value="<?php echo $k;?>" <?php if($k == $entity['is_show']):?>selected="selected"<?php endif;?> >
								<?php echo $v;?>
							</option>
						<?php endforeach;?>
				</select>
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle"></span>
				</span>
			</div>
		</div>

				<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="order_number">
				排序：
			 </label>

			<div class="col-sm-9">
				<input type="number"  name="order_number"  id="order_number"   value="<?php echo $entity['order_number'];?>" class="col-xs-10 col-sm-5" >
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle">轮播图排序，自然数(1,2,3,100,120,)，越小越靠前</span>
				</span>
			</div>
		</div>

				<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="title">
				 广告图片标题
			 </label>

			<div class="col-sm-9">
			<input type="text" id="title" name="title"  value="<?php echo $entity['title'];?>" class="col-xs-10 col-sm-5">
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle"></span>
				</span>
			</div>
		</div>

		<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="link_url">
				 跳转链接：
			 </label>

			<div class="col-sm-9">
			<input type="text" id="link_url" name="link_url" placeholder="http://" value="<?php echo $entity['link_url'];?>" class="col-xs-10 col-sm-5">
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle"></span>
				</span>
			</div>
		</div>

		<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right" for="description">
				广告图片描述：
			 </label>

			<div class="col-sm-9">
			<textarea  class="limited col-xs-10 col-sm-5" id="description" name="description" maxlength="600"><?php echo $entity['description'];?></textarea>
				<span class="help-inline col-xs-12 col-sm-7">
					<span class="middle"></span>
				</span>
			</div>
		</div>

		<div class="space-4"></div>

		<div class="form-group">
			<label class="col-sm-3 control-label no-padding-right"  for="img_url">
				上传广告图片：
			</label>

			<div class="col-sm-9">
				<div class="col-xs-10 col-sm-5">
					<input type="file" name="img_url" id="img_url" class=" " />
				</div>
					<span class="help-inline col-xs-12 col-sm-7">
						<span class="middle">
							<a href="<?php echo $entity['img_url'];?>" target="_blank">
								<img style="width:120px;height:35px;" src="<?php echo $entity['img_url'];?>" alt="" />
							</a>
						</span>
					</span>
			</div>
		</div>

		<div class="space-4"></div>


			<div class="clearfix form-actions">
				<div class="col-md-offset-3 col-md-9">
					<button class="btn btn-info" type="submit" >
						<i class="ace-icon fa fa-check bigger-110"></i>
						修改
					</button>
					<a class="btn btn-info" href="<?php echo U('Backend/Ad/index', [  ], false);?>">
						<span class="glyphicon glyphicon-repeat"></span>
						返回
					</a>
				</div>
			</div>

		</form>




		</div>
	</div>
</block>

<block name="scripts">
		<div id="limiterBox" class="limiterBox" style="position: absolute; display: none;"></div>
		<script src="__BACKEND_ACEADMIN__js/jquery.inputlimiter.1.3.1.min.js"></script>
<!-- <script src="__COM_JS__jquery.validate.min.js"></script> -->
<script src="__COM_JS__jquery.validate_tuozhan.js"></script>
<script src="__COM_JS__messages_zh.js"></script>

<script type="text/javascript">
$(function($){
	$('#img_url').ace_file_input({
		no_file:'未选择上传图片',
		btn_choose:'请选择图片',
		btn_change:'更换图片',
		droppable:false,
		onchange:null,
		thumbnail:false, //| true | large
		allowExt: ['gif','png','jpg','jpeg'],
		allowMime: ["image/jpg", "image/jpeg", "image/png", "image/gif", "image/bmp"],
		//onchange:''
		//
	});
});
	function updater(form){
		form.submit();
	}
	$("#update").validate({
		submitHandler:function(form){
			updater(form);
        },
		onclick:false,
		onfocusout:false,
		onkeyup:false,
		errorPlacement: function (error, element){
			var $alert = $('<div class="alert alert-danger "><button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button><strong><i class="ace-icon fa fa-times"></i>错误： </strong> '+$(error).html()+' <br> </div>');

			$("#update").before($alert);

		},
		rules:{
			product_price:{
				required:true,
				number:true,
			  },
		  	month:{
				required:true,
				digits:true,
			},
			type:{
				required:true,
				number:true,
			}
		},
	  	messages:{
	  		product_price:{
				required:"产品价格必须填",
				number:"请输入数字作为价格",
		  	},
		  	month:{
			   required:"购买时间不能为空",
			   digits:"购买时间必须是整数"
			 },
			type:{
				required:"您忘记选择价格类型了",
				number:"价格类型参数非法"
			}
		}
	});

</script>

</block>
